{"remainingRequest":"/Users/warrenyang/Documents/mycode/2022/web-app/node_modules/babel-loader/lib/index.js!/Users/warrenyang/Documents/mycode/2022/web-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/warrenyang/Documents/mycode/2022/web-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/warrenyang/Documents/mycode/2022/web-app/src/views/zip/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/warrenyang/Documents/mycode/2022/web-app/src/views/zip/index.vue","mtime":1668233877000},{"path":"/Users/warrenyang/Documents/mycode/2022/web-app/babel.config.js","mtime":1668233877000},{"path":"/Users/warrenyang/Documents/mycode/2022/web-app/node_modules/cache-loader/dist/cjs.js","mtime":1668390099165},{"path":"/Users/warrenyang/Documents/mycode/2022/web-app/node_modules/babel-loader/lib/index.js","mtime":1668390101294},{"path":"/Users/warrenyang/Documents/mycode/2022/web-app/node_modules/cache-loader/dist/cjs.js","mtime":1668390099165},{"path":"/Users/warrenyang/Documents/mycode/2022/web-app/node_modules/vue-loader/lib/index.js","mtime":1668390101491}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIGZyb20gIi9Vc2Vycy93YXJyZW55YW5nL0RvY3VtZW50cy9teWNvZGUvMjAyMi93ZWItYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3dhcnJlbnlhbmcvRG9jdW1lbnRzL215Y29kZS8yMDIyL3dlYi1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvd2FycmVueWFuZy9Eb2N1bWVudHMvbXljb2RlLzIwMjIvd2ViLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZldGNoTGlzdCB9IGZyb20gJ0AvYXBpL2FydGljbGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0V4cG9ydFppcCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IG51bGwsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBkb3dubG9hZExvYWRpbmc6IGZhbHNlLAogICAgICBmaWxlbmFtZTogJycKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkZmV0Y2hMaXN0LCBkYXRhOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoTGlzdCgpOwogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF95aWVsZCRmZXRjaExpc3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRmZXRjaExpc3QuZGF0YTsKICAgICAgICAgICAgICAgIF90aGlzLmxpc3QgPSBkYXRhLml0ZW1zOwogICAgICAgICAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaGFuZGxlRG93bmxvYWQ6IGZ1bmN0aW9uIGhhbmRsZURvd25sb2FkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5kb3dubG9hZExvYWRpbmcgPSB0cnVlOwogICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgnQC92ZW5kb3IvRXhwb3J0MlppcCcpKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoemlwKSB7CiAgICAgICAgdmFyIHRIZWFkZXIgPSBbJ0lkJywgJ1RpdGxlJywgJ0F1dGhvcicsICdSZWFkaW5ncycsICdEYXRlJ107CiAgICAgICAgdmFyIGZpbHRlclZhbCA9IFsnaWQnLCAndGl0bGUnLCAnYXV0aG9yJywgJ3BhZ2V2aWV3cycsICdkaXNwbGF5X3RpbWUnXTsKICAgICAgICB2YXIgbGlzdCA9IF90aGlzMi5saXN0OwogICAgICAgIHZhciBkYXRhID0gX3RoaXMyLmZvcm1hdEpzb24oZmlsdGVyVmFsLCBsaXN0KTsKICAgICAgICB6aXAuZXhwb3J0X3R4dF90b196aXAodEhlYWRlciwgZGF0YSwgX3RoaXMyLmZpbGVuYW1lLCBfdGhpczIuZmlsZW5hbWUpOwogICAgICAgIF90aGlzMi5kb3dubG9hZExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZm9ybWF0SnNvbjogZnVuY3Rpb24gZm9ybWF0SnNvbihmaWx0ZXJWYWwsIGpzb25EYXRhKSB7CiAgICAgIHJldHVybiBqc29uRGF0YS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gZmlsdGVyVmFsLm1hcChmdW5jdGlvbiAoaikgewogICAgICAgICAgcmV0dXJuIHZbal07CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAAA,OACAC;cAAA;gBAAA;gBAAAR;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAS;MAAA;MACA;MACA;QAAA;MAAA;QACA;QACA;QACA;QACA;QACAC;QACA;MACA;IACA;IACAC;MACA;QAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA","names":["name","data","list","listLoading","downloadLoading","filename","created","methods","fetchData","fetchList","handleDownload","zip","formatJson"],"sourceRoot":"src/views/zip","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-input v-model=\"filename\" placeholder=\"Please enter the file name (default file)\" style=\"width:300px;\" prefix-icon=\"el-icon-document\" />\n    <el-button :loading=\"downloadLoading\" style=\"margin-bottom:20px;\" type=\"primary\" icon=\"el-icon-document\" @click=\"handleDownload\">\n      Export Zip\n    </el-button>\n    <el-table v-loading=\"listLoading\" :data=\"list\" element-loading-text=\"拼命加载中\" border fit highlight-current-row>\n      <el-table-column align=\"center\" label=\"ID\" width=\"95\">\n        <template slot-scope=\"scope\">\n          {{ scope.$index }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Title\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.title }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Author\" width=\"95\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag>{{ scope.row.author }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Readings\" width=\"115\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.pageviews }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"Date\" width=\"220\">\n        <template slot-scope=\"scope\">\n          <i class=\"el-icon-time\" />\n          <span>{{ scope.row.display_time }}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport { fetchList } from '@/api/article'\n\nexport default {\n  name: 'ExportZip',\n  data() {\n    return {\n      list: null,\n      listLoading: true,\n      downloadLoading: false,\n      filename: ''\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    async fetchData() {\n      this.listLoading = true\n      const { data } = await fetchList()\n      this.list = data.items\n      this.listLoading = false\n    },\n    handleDownload() {\n      this.downloadLoading = true\n      import('@/vendor/Export2Zip').then(zip => {\n        const tHeader = ['Id', 'Title', 'Author', 'Readings', 'Date']\n        const filterVal = ['id', 'title', 'author', 'pageviews', 'display_time']\n        const list = this.list\n        const data = this.formatJson(filterVal, list)\n        zip.export_txt_to_zip(tHeader, data, this.filename, this.filename)\n        this.downloadLoading = false\n      })\n    },\n    formatJson(filterVal, jsonData) {\n      return jsonData.map(v => filterVal.map(j => v[j]))\n    }\n  }\n}\n</script>\n"]}]}